import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
public class InterfaceCronicas extends JFrame {
    private JLabel perguntaLabel;
    private JTextField campoEntrada;
    private String personagem1, personagem2, deck1, deck2;
    private int vidaJogador1 = 15, vidaJogador2 = 15;
    private int manaJogador1 = 1, manaJogador2 = 1;
    private int etapaPergunta = 0;

    private JLabel infoJogador1Nome;
    private JLabel infoJogador1Vida;
    private JLabel infoJogador1Mana;
    private JLabel infoJogador1Deck;
    private JLabel infoJogador2Nome;
    private JLabel infoJogador2Vida;
    private JLabel infoJogador2Mana;
    private JLabel infoJogador2Deck;
    private Font pressStart2PFont;
    private Image backgroundImage;

    // Declaração do painel de informações dos jogadores
    private JPanel painelInfoJogadores;
    private JButton comecarButton; // Botão para começar o jogo

    public InterfaceCronicas() {
        // Carregar a fonte PressStart2P
        try {
            pressStart2PFont = Font.createFont(Font.TRUETYPE_FONT, new File("src/fonts/PressStart2P.ttf")).deriveFont(18f);
        } catch (FontFormatException | IOException e) {
            e.printStackTrace();
            System.out.println("Erro ao carregar a fonte PressStart2P.");
        }

        // Carregar a imagem de fundo
        try {
            backgroundImage = ImageIO.read(new File("src/images/background.jpg"));
        } catch (IOException e) {
            e.printStackTrace();
            System.out.println("Erro ao carregar a imagem de fundo.");
        }

        JPanel painelInferior = new JPanel();
        painelInferior.setLayout(new BorderLayout());
        painelInferior.setOpaque(false); // Torna o painel inferior transparente

        perguntaLabel = new JLabel("CRÔNICAS DE ARCANA", SwingConstants.CENTER);
        perguntaLabel.setFont(pressStart2PFont); // Usando PressStart2P para a pergunta
        perguntaLabel.setForeground(Color.WHITE); // Ajusta a cor do texto para visibilidade

        campoEntrada = new JTextField();
        campoEntrada.setFont(pressStart2PFont);  // Definindo fonte para o campo de entrada
        campoEntrada.setForeground(Color.BLACK); // Definir texto como preto
        campoEntrada.setVisible(false);
        campoEntrada.setPreferredSize(new Dimension(campoEntrada.getPreferredSize().width, campoEntrada.getPreferredSize().height * 2));

        comecarButton = new JButton("Começar");
        comecarButton.setFont(pressStart2PFont);
        comecarButton.setForeground(Color.black); // Fonte preta para o botão

        // Definir a ação do botão "Começar"
        comecarButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // Revelar o painel de informações e iniciar o processo de perguntas
                iniciarPerguntas();
                comecarButton.setVisible(false);  // Esconder o botão "Começar"
                painelInfoJogadores.setVisible(true);  // Mostrar o painel de informações
                campoEntrada.setVisible(true);  // Mostrar o campo de entrada
                campoEntrada.setEnabled(true);  // Garantir que o campo de entrada esteja habilitado
            }
        });

        setTitle("Crônicas de Arcana");
        setSize(800, 500);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setLayout(new BorderLayout());

        // Painel com fundo personalizado
        BackgroundPanel mainPanel = new BackgroundPanel();
        mainPanel.setLayout(new BorderLayout());
        setContentPane(mainPanel);

        // Criando o painel de informações dos jogadores
        painelInfoJogadores = new JPanel();
        painelInfoJogadores.setLayout(new GridLayout(4, 2));
        painelInfoJogadores.setOpaque(false);
        painelInfoJogadores.setVisible(false);  // Inicialmente invisível

        infoJogador1Nome = new JLabel("Jogador 1: ", SwingConstants.LEFT);
        infoJogador1Nome.setFont(pressStart2PFont);
        infoJogador1Nome.setForeground(Color.WHITE);
        infoJogador1Vida = new JLabel("Vida: ", SwingConstants.LEFT);
        infoJogador1Vida.setFont(pressStart2PFont);
        infoJogador1Vida.setForeground(Color.WHITE);
        infoJogador1Mana = new JLabel("Mana: ", SwingConstants.LEFT);
        infoJogador1Mana.setFont(pressStart2PFont);
        infoJogador1Mana.setForeground(Color.WHITE);
        infoJogador1Deck = new JLabel("Reino: ", SwingConstants.LEFT);
        infoJogador1Deck.setFont(pressStart2PFont);
        infoJogador1Deck.setForeground(Color.WHITE);

        infoJogador2Nome = new JLabel("Jogador 2: ", SwingConstants.RIGHT);
        infoJogador2Nome.setFont(pressStart2PFont);
        infoJogador2Nome.setForeground(Color.WHITE);
        infoJogador2Vida = new JLabel("Vida: ", SwingConstants.RIGHT);
        infoJogador2Vida.setFont(pressStart2PFont);
        infoJogador2Vida.setForeground(Color.WHITE);
        infoJogador2Mana = new JLabel("Mana: ", SwingConstants.RIGHT);
        infoJogador2Mana.setFont(pressStart2PFont);
        infoJogador2Mana.setForeground(Color.WHITE);
        infoJogador2Deck = new JLabel("Reino: ", SwingConstants.RIGHT);
        infoJogador2Deck.setFont(pressStart2PFont);
        infoJogador2Deck.setForeground(Color.WHITE);

        painelInfoJogadores.add(infoJogador1Nome);
        painelInfoJogadores.add(infoJogador2Nome);
        painelInfoJogadores.add(infoJogador1Vida);
        painelInfoJogadores.add(infoJogador2Vida);
        painelInfoJogadores.add(infoJogador1Mana);
        painelInfoJogadores.add(infoJogador2Mana);
        painelInfoJogadores.add(infoJogador1Deck);
        painelInfoJogadores.add(infoJogador2Deck);

        mainPanel.add(painelInfoJogadores, BorderLayout.NORTH);

        painelInferior.setLayout(new BorderLayout());
        painelInferior.setOpaque(false);

        perguntaLabel = new JLabel("CRÔNICAS DE ARCANA", SwingConstants.CENTER);
        perguntaLabel.setFont(pressStart2PFont); // Usando PressStart2P para a pergunta
        perguntaLabel.setForeground(Color.WHITE);

        campoEntrada = new JTextField();
        campoEntrada.setFont(pressStart2PFont);
        campoEntrada.setForeground(Color.BLACK); // Definir texto como preto no campo de entrada
        campoEntrada.setVisible(false);
        campoEntrada.setPreferredSize(new Dimension(campoEntrada.getPreferredSize().width, campoEntrada.getPreferredSize().height * 2));

        // Adicionando um ActionListener para capturar as respostas
        campoEntrada.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                String resposta = campoEntrada.getText();
                processarResposta(resposta);  // Processa a resposta dada
                campoEntrada.setText("");  // Limpa o campo de entrada após a resposta
            }
        });

        painelInferior.add(perguntaLabel, BorderLayout.NORTH);
        painelInferior.add(campoEntrada, BorderLayout.CENTER);
        painelInferior.add(comecarButton, BorderLayout.SOUTH); // Colocando o botão abaixo do campo de entrada

        mainPanel.add(painelInferior, BorderLayout.SOUTH);
    }

    private void iniciarPerguntas() {
        campoEntrada.setEnabled(true);
        perguntaLabel.setText("<html>JOGADOR 1, DIGITE O NOME DE SEU PERSONAGEM:</html>");
        etapaPergunta = 1;
    }

    private void processarResposta(String resposta) {
        switch (etapaPergunta) {
            case 1:
                personagem1 = resposta;
                infoJogador1Nome.setText("Jogador 1: " + personagem1);
                perguntaLabel.setText("<html>JOGADOR 2, DIGITE O NOME DE SEU PERSONAGEM:</html>");
                etapaPergunta = 2;
                break;
            case 2:
                personagem2 = resposta;
                infoJogador2Nome.setText("Jogador 2: " + personagem2);
                perguntaLabel.setText("<html>JOGADOR 1, ESCOLHA UM REINO:</html>");
                etapaPergunta = 3;
                break;
            case 3:
                deck1 = resposta;
                infoJogador1Deck.setText("Deck: " + deck1);
                perguntaLabel.setText("<html>JOGADOR 2, ESCOLHA UM REINO:</html>");
                etapaPergunta = 4;
                break;
            case 4:
                deck2 = resposta;
                infoJogador2Deck.setText("Deck: " + deck2);
                perguntaLabel.setText("<html>PREPARE-SE PARA A LUTA!</html>");
                campoEntrada.setVisible(false);
                break;
            default:
                break;
        }
    }

    // Painel com fundo personalizado
    private class BackgroundPanel extends JPanel {
        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (backgroundImage != null) {
                g.drawImage(backgroundImage, 0, 0, getWidth(), getHeight(), this);
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                InterfaceCronicas frame = new InterfaceCronicas();
                frame.setVisible(true);
            }
        });
    }
}
